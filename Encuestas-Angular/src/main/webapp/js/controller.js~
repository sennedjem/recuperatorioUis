'use strict';

var app = angular.module('encuestaApp',['ngRoute']);

app.config(function($routeProvider) {
  $routeProvider.when('/', { templateUrl : 'pages/index.html', controller: 'LoginCtrl'})
	.when('/responder/:mail', {templateUrl : 'pages/responder.html',controller :
 'ResponderCtrl'})
	.when('/gracias', {templateUrl : 'pages/gracias.html'})
	.otherwise({redirectTo:'/'});
});

app.service('EncuestaService', function($http) { 
  return {
	responderEncuesta: function(respuesta,callback) {
	$http.get('/responder', respuesta).success(callback);
  },
  getCarreras: function(){

  },

  getTurnos: function(){
  }
 }
});

app.controller('LoginCtrl', function ($location) {
  $scope.autentificar = function(){
   $location.path('responder/'+$scope.user.mail);
  }
});

app.controller('ResponderCtrl', function($scope, $location, $routeParams, EncuestaService){
  $scope.turnos = EncuestaService.getTurnos();
  $scope.carreras = EncuestaService.getCarreras();
  $scope.respuesta = {mail: $routeParams.mail, materias: []};
 
  $scope.agregar = function(){
   $scope.respuesta.materias.push({ materia: $scope.materiaSeleccionada, turno:
 $scope.turnoSeleccionado});
   $scope.materiaSeleccionada = {};
   $scope.turnoSeleccionado = {};
  }
}
